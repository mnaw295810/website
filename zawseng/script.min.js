let currentQuestionIndex=0;let score=0;let questions=[];const userAnswers=[];const correctAnswers=[];const categoryContainer=document.getElementById("category-container");const quizContainer=document.getElementById("quiz-container");const questionElement=document.getElementById("question");const optionsElement=document.getElementById("options");const resultElement=document.getElementById("result");const nextButton=document.getElementById("next-btn");const restartButton=document.getElementById("restart-btn");const chapterContainer=document.getElementById("chapter-container");const questionCountContainer=document.getElementById("question-count-container");nextButton.style.display="none";restartButton.style.display="none";chapterContainer.classList.add("hidden");questionCountContainer.classList.add("hidden");let questionsByCategory={};fetch("questions.min.json").then((response)=>response.json()).then((data)=>{questionsByCategory=data;}).catch((error)=>console.error("Error loading JSON:",error));document.querySelectorAll(".category-btn").forEach((button)=>{button.addEventListener("click",()=>{const category=button.getAttribute("data-category");if(category==="BMC"){chapterContainer.classList.remove("hidden");categoryContainer.classList.add("hidden");}else{const allQuestions=questionsByCategory[category];showQuestionCountSelection(allQuestions);categoryContainer.classList.add("hidden");}});});document.querySelectorAll(".chapter-btn").forEach((button)=>{button.addEventListener("click",()=>{const chapter=button.getAttribute("data-chapter");const allQuestions=questionsByCategory["BMC"][chapter];showQuestionCountSelection(allQuestions);});});function showQuestionCountSelection(allQuestions){chapterContainer.classList.add("hidden");questionCountContainer.classList.remove("hidden");document.querySelectorAll(".question-count-btn").forEach((countButton)=>{countButton.addEventListener("click",()=>{const count=countButton.getAttribute("data-count");let selectedQuestions=[];if(count==="all"){selectedQuestions=allQuestions;}else{selectedQuestions=shuffleArray(allQuestions).slice(0,parseInt(count));}questions=selectedQuestions;questionCountContainer.classList.add("hidden");quizContainer.classList.remove("hidden");displayQuestion();});});}function shuffleArray(array){for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];}return array;}function displayQuestion(){const currentQuestion=questions[currentQuestionIndex];questionElement.textContent=`${currentQuestionIndex+1}.${currentQuestion.question}`;optionsElement.innerHTML="";currentQuestion.options.forEach((option)=>{const optionElement=document.createElement("div");optionElement.className="option";optionElement.textContent=option;optionElement.addEventListener("click",()=>checkAnswer(option[0]));optionsElement.appendChild(optionElement);});}function checkAnswer(selectedAnswer){const correctAnswer=questions[currentQuestionIndex].correctAnswer;userAnswers.push(selectedAnswer);correctAnswers.push(correctAnswer);const options=document.querySelectorAll(".option");options.forEach((option)=>{option.style.pointerEvents="none";if(option.textContent.startsWith(correctAnswer)){option.classList.add("correct");}else if(option.textContent.startsWith(selectedAnswer)){option.classList.add("incorrect");}});if(selectedAnswer===correctAnswer){score++;}nextButton.style.display="block";}function nextQuestion(){currentQuestionIndex++;if(currentQuestionIndex<questions.length){displayQuestion();resultElement.textContent="";nextButton.style.display="none";}else{endQuiz();}}function endQuiz(){questionElement.textContent=``;optionsElement.innerHTML="";let resultsHTML=`<h3>Your Results:${score}of${questions.length}</h3>`;questions.forEach((question,index)=>{const userAnswer=userAnswers[index];const correctAnswer=correctAnswers[index];const userAnswerText=question.options.find((opt)=>opt.startsWith(userAnswer))||"Not answered";const correctAnswerText=question.options.find((opt)=>opt.startsWith(correctAnswer));resultsHTML+=`<div class="result-item"><p><strong>${index+1}.</strong>${question.question}</p><p>Your Answer:${userAnswerText}</p><p>Correct Answer:${correctAnswerText}</p></div><hr>`;});resultElement.innerHTML=resultsHTML;nextButton.style.display="none";restartButton.style.display="block";}function restartQuiz(){currentQuestionIndex=0;score=0;userAnswers.length=0;correctAnswers.length=0;resultElement.innerHTML="";categoryContainer.classList.remove("hidden");quizContainer.classList.add("hidden");chapterContainer.classList.add("hidden");questionCountContainer.classList.add("hidden");nextButton.style.display="none";restartButton.style.display="none";}nextButton.addEventListener("click",nextQuestion);restartButton.addEventListener("click",restartQuiz);